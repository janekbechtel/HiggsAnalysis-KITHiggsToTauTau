#!/bin/bash
#Adjust these export commands to meet your directory settings
export PlotPath=
export ArtusInput=
export Masses=
export Weights=
export Paralells=
export scale_mc='1.0'
export project_lumi='1.0'
export cut_mc='1.0'
export Variable=m_vis

#=====BDT plotting commands start here=====
mkdir -p $PlotPath/BDTs
rm $PlotPath/BDTs/et/et_minmax.txt
touch $PlotPath/BDTs/et/et_minmax.txt

#============plotlevel operations=============


#=====Cuts and Uncertainties=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_0Jets_FakeDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_0Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x et_0Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_0Jets_FakeDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_0Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x et_0Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_0Jets_FinalDiscriminator"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_0Jets_FinalDiscriminator -n $Paralells -x et_0Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_0Jets_FinalDiscriminator" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_0Jets_FinalDiscriminator -n $Paralells -x et_0Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_0Jets_TTDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_0Jets_TTDiscriminator_rm_Nothing -n $Paralells -x et_0Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_0Jets_TTDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_0Jets_TTDiscriminator_rm_Nothing -n $Paralells -x et_0Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_1Jets_FakeDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_1Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x et_1Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_1Jets_FakeDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_1Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x et_1Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_1Jets_FinalDiscriminator"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_1Jets_FinalDiscriminator -n $Paralells -x et_1Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_1Jets_FinalDiscriminator" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_1Jets_FinalDiscriminator -n $Paralells -x et_1Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_1Jets_TTDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_1Jets_TTDiscriminator_rm_Nothing -n $Paralells -x et_1Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_1Jets_TTDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_1Jets_TTDiscriminator_rm_Nothing -n $Paralells -x et_1Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_2Jets_FakeDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_2Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x et_2Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_2Jets_FakeDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_2Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x et_2Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_2Jets_FinalDiscriminator"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_2Jets_FinalDiscriminator -n $Paralells -x et_2Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_2Jets_FinalDiscriminator" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_2Jets_FinalDiscriminator -n $Paralells -x et_2Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_et_2Jets_TTDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c et -w $Weights --scale-signal 250 -o $PlotPath/BDTs/et/et_2Jets_TTDiscriminator_rm_Nothing -n $Paralells -x et_2Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_et_2Jets_TTDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/et/et_minmax.txt -c et -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/et/et_2Jets_TTDiscriminator_rm_Nothing -n $Paralells -x et_2Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg



#=====copy files with new categories=====
cp $PlotPath/BDTs/et/et_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
cp ./et_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg


#=====Controllplots and other stuff=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c et -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/et -n $Paralells --blinding-threshold 0.2 --categories et_et_0Jets_FakeDiscriminator_rm_Nothing_signal et_et_0Jets_FakeDiscriminator_rm_Nothing_bkg et_et_0Jets_FakeDiscriminator_rm_Nothing_mixed et_et_0Jets_FinalDiscriminator_signal et_et_0Jets_FinalDiscriminator_bkg et_et_0Jets_FinalDiscriminator_mixed et_et_0Jets_TTDiscriminator_rm_Nothing_signal et_et_0Jets_TTDiscriminator_rm_Nothing_bkg et_et_0Jets_TTDiscriminator_rm_Nothing_mixed et_et_1Jets_FakeDiscriminator_rm_Nothing_signal et_et_1Jets_FakeDiscriminator_rm_Nothing_bkg et_et_1Jets_FakeDiscriminator_rm_Nothing_mixed et_et_1Jets_FinalDiscriminator_signal et_et_1Jets_FinalDiscriminator_bkg et_et_1Jets_FinalDiscriminator_mixed et_et_1Jets_TTDiscriminator_rm_Nothing_signal et_et_1Jets_TTDiscriminator_rm_Nothing_bkg et_et_1Jets_TTDiscriminator_rm_Nothing_mixed et_et_2Jets_FakeDiscriminator_rm_Nothing_signal et_et_2Jets_FakeDiscriminator_rm_Nothing_bkg et_et_2Jets_FakeDiscriminator_rm_Nothing_mixed et_et_2Jets_FinalDiscriminator_signal et_et_2Jets_FinalDiscriminator_bkg et_et_2Jets_FinalDiscriminator_mixed et_et_2Jets_TTDiscriminator_rm_Nothing_signal et_et_2Jets_TTDiscriminator_rm_Nothing_bkg et_et_2Jets_TTDiscriminator_rm_Nothing_mixed et_inclusive -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c et -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/et -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c et -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/et -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c et -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/et -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c et -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/et -n $Paralells --blinding-threshold 0.2 --categories et_et_0Jets_FakeDiscriminator_rm_Nothing_signal et_et_0Jets_FakeDiscriminator_rm_Nothing_bkg et_et_0Jets_FakeDiscriminator_rm_Nothing_mixed et_et_0Jets_FinalDiscriminator_signal et_et_0Jets_FinalDiscriminator_bkg et_et_0Jets_FinalDiscriminator_mixed et_et_0Jets_TTDiscriminator_rm_Nothing_signal et_et_0Jets_TTDiscriminator_rm_Nothing_bkg et_et_0Jets_TTDiscriminator_rm_Nothing_mixed et_et_1Jets_FakeDiscriminator_rm_Nothing_signal et_et_1Jets_FakeDiscriminator_rm_Nothing_bkg et_et_1Jets_FakeDiscriminator_rm_Nothing_mixed et_et_1Jets_FinalDiscriminator_signal et_et_1Jets_FinalDiscriminator_bkg et_et_1Jets_FinalDiscriminator_mixed et_et_1Jets_TTDiscriminator_rm_Nothing_signal et_et_1Jets_TTDiscriminator_rm_Nothing_bkg et_et_1Jets_TTDiscriminator_rm_Nothing_mixed et_et_2Jets_FakeDiscriminator_rm_Nothing_signal et_et_2Jets_FakeDiscriminator_rm_Nothing_bkg et_et_2Jets_FakeDiscriminator_rm_Nothing_mixed et_et_2Jets_FinalDiscriminator_signal et_et_2Jets_FinalDiscriminator_bkg et_et_2Jets_FinalDiscriminator_mixed et_et_2Jets_TTDiscriminator_rm_Nothing_signal et_et_2Jets_TTDiscriminator_rm_Nothing_bkg et_et_2Jets_TTDiscriminator_rm_Nothing_mixed et_inclusive -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c et -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/et -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc


#=====BDT Overtraining=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/et -n $Paralells

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_0Jets_FakeDiscriminator_rm_Nothing -r -x 'sqrt(((T1et_0Jets_FakeDiscriminator_rm_Nothing-et_0Jets_FakeDiscriminator_rm_Nothing)/1)+((T2et_0Jets_FakeDiscriminator_rm_Nothing-et_0Jets_FakeDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_0Jets_FinalDiscriminator -r -x 'sqrt(((T1et_0Jets_FinalDiscriminator-et_0Jets_FinalDiscriminator)/1)+((T2et_0Jets_FinalDiscriminator-et_0Jets_FinalDiscriminator)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_0Jets_TTDiscriminator_rm_Nothing -r -x 'sqrt(((T1et_0Jets_TTDiscriminator_rm_Nothing-et_0Jets_TTDiscriminator_rm_Nothing)/1)+((T2et_0Jets_TTDiscriminator_rm_Nothing-et_0Jets_TTDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_1Jets_FakeDiscriminator_rm_Nothing -r -x 'sqrt(((T1et_1Jets_FakeDiscriminator_rm_Nothing-et_1Jets_FakeDiscriminator_rm_Nothing)/1)+((T2et_1Jets_FakeDiscriminator_rm_Nothing-et_1Jets_FakeDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_1Jets_FinalDiscriminator -r -x 'sqrt(((T1et_1Jets_FinalDiscriminator-et_1Jets_FinalDiscriminator)/1)+((T2et_1Jets_FinalDiscriminator-et_1Jets_FinalDiscriminator)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_1Jets_TTDiscriminator_rm_Nothing -r -x 'sqrt(((T1et_1Jets_TTDiscriminator_rm_Nothing-et_1Jets_TTDiscriminator_rm_Nothing)/1)+((T2et_1Jets_TTDiscriminator_rm_Nothing-et_1Jets_TTDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_2Jets_FakeDiscriminator_rm_Nothing -r -x 'sqrt(((T1et_2Jets_FakeDiscriminator_rm_Nothing-et_2Jets_FakeDiscriminator_rm_Nothing)/1)+((T2et_2Jets_FakeDiscriminator_rm_Nothing-et_2Jets_FakeDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_2Jets_FinalDiscriminator -r -x 'sqrt(((T1et_2Jets_FinalDiscriminator-et_2Jets_FinalDiscriminator)/1)+((T2et_2Jets_FinalDiscriminator-et_2Jets_FinalDiscriminator)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c et -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/et/et_2Jets_TTDiscriminator_rm_Nothing -r -x 'sqrt(((T1et_2Jets_TTDiscriminator_rm_Nothing-et_2Jets_TTDiscriminator_rm_Nothing)/1)+((T2et_2Jets_TTDiscriminator_rm_Nothing-et_2Jets_TTDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/nFold_DiffScan.py -i $PlotPath/BDTs/et -o $PlotPath/et_DiffScans -m $Masses

#=====Categorization Overlap=====



#=====Limit commands start here=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_datacardsMVATest.py -i $ArtusInput -x $Variable --add-bbb-uncs -m $Masses -n $Paralells --clear-output-dir -c et -w $Weights -o $PlotPath/et/classic --categories 0jet_high 0jet_low 1jet_high 1jet_low 2jet_vbf --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc


python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/limit_collector.py -i $PlotPath/et/classic -o $PlotPath/limits_vbftagging -m $Masses


#=====remove files with new categories=====

rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/Reg_BDT.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/VBF_BDT.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_shift_expressions.cfg
touch $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_expressions.cfg
touch $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/et_mvadatacards.cfg
