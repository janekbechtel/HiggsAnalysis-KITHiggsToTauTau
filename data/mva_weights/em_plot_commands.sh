#!/bin/bash
#Adjust these export commands to meet your directory settings
export PlotPath=
export ArtusInput=
export Masses=
export Weights=
export Paralells=
export scale_mc='1.0'
export project_lumi='1.0'
export cut_mc='1.0'
export Variable=m_vis

#=====BDT plotting commands start here=====
mkdir -p $PlotPath/BDTs
rm $PlotPath/BDTs/em/em_minmax.txt
touch $PlotPath/BDTs/em/em_minmax.txt

#============plotlevel operations=============


#=====Cuts and Uncertainties=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_0Jets_FakeDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_0Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x em_0Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_0Jets_FakeDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_0Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x em_0Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_0Jets_FinalDiscriminator"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_0Jets_FinalDiscriminator -n $Paralells -x em_0Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_0Jets_FinalDiscriminator" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_0Jets_FinalDiscriminator -n $Paralells -x em_0Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_0Jets_TTDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_0Jets_TTDiscriminator_rm_Nothing -n $Paralells -x em_0Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_0Jets_TTDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_0Jets_TTDiscriminator_rm_Nothing -n $Paralells -x em_0Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_1Jets_FakeDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_1Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x em_1Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_1Jets_FakeDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_1Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x em_1Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_1Jets_FinalDiscriminator"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_1Jets_FinalDiscriminator -n $Paralells -x em_1Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_1Jets_FinalDiscriminator" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_1Jets_FinalDiscriminator -n $Paralells -x em_1Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_1Jets_TTDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_1Jets_TTDiscriminator_rm_Nothing -n $Paralells -x em_1Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_1Jets_TTDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_1Jets_TTDiscriminator_rm_Nothing -n $Paralells -x em_1Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_2Jets_FakeDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_2Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x em_2Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_2Jets_FakeDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_2Jets_FakeDiscriminator_rm_Nothing -n $Paralells -x em_2Jets_FakeDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_2Jets_FinalDiscriminator"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_2Jets_FinalDiscriminator -n $Paralells -x em_2Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_2Jets_FinalDiscriminator" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_2Jets_FinalDiscriminator -n $Paralells -x em_2Jets_FinalDiscriminator --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_em_2Jets_TTDiscriminator_rm_Nothing"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c em -w $Weights --scale-signal 250 -o $PlotPath/BDTs/em/em_2Jets_TTDiscriminator_rm_Nothing -n $Paralells -x em_2Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_em_2Jets_TTDiscriminator_rm_Nothing" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/em/em_minmax.txt -c em -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/em/em_2Jets_TTDiscriminator_rm_Nothing -n $Paralells -x em_2Jets_TTDiscriminator_rm_Nothing --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg



#=====copy files with new categories=====
cp $PlotPath/BDTs/em/em_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
cp ./em_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg


#=====Controllplots and other stuff=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c em -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/em -n $Paralells --blinding-threshold 0.2 --categories em_em_0Jets_FakeDiscriminator_rm_Nothing_signal em_em_0Jets_FakeDiscriminator_rm_Nothing_bkg em_em_0Jets_FakeDiscriminator_rm_Nothing_mixed em_em_0Jets_FinalDiscriminator_signal em_em_0Jets_FinalDiscriminator_bkg em_em_0Jets_FinalDiscriminator_mixed em_em_0Jets_TTDiscriminator_rm_Nothing_signal em_em_0Jets_TTDiscriminator_rm_Nothing_bkg em_em_0Jets_TTDiscriminator_rm_Nothing_mixed em_em_1Jets_FakeDiscriminator_rm_Nothing_signal em_em_1Jets_FakeDiscriminator_rm_Nothing_bkg em_em_1Jets_FakeDiscriminator_rm_Nothing_mixed em_em_1Jets_FinalDiscriminator_signal em_em_1Jets_FinalDiscriminator_bkg em_em_1Jets_FinalDiscriminator_mixed em_em_1Jets_TTDiscriminator_rm_Nothing_signal em_em_1Jets_TTDiscriminator_rm_Nothing_bkg em_em_1Jets_TTDiscriminator_rm_Nothing_mixed em_em_2Jets_FakeDiscriminator_rm_Nothing_signal em_em_2Jets_FakeDiscriminator_rm_Nothing_bkg em_em_2Jets_FakeDiscriminator_rm_Nothing_mixed em_em_2Jets_FinalDiscriminator_signal em_em_2Jets_FinalDiscriminator_bkg em_em_2Jets_FinalDiscriminator_mixed em_em_2Jets_TTDiscriminator_rm_Nothing_signal em_em_2Jets_TTDiscriminator_rm_Nothing_bkg em_em_2Jets_TTDiscriminator_rm_Nothing_mixed em_inclusive -x pt_1 pt_2 diLepDeltaR H_pt pZetaMissVis mt_2 mt_1 mvamet m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c em -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/em -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 diLepDeltaR H_pt pZetaMissVis mt_2 mt_1 mvamet m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c em -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/em -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 diLepDeltaR H_pt pZetaMissVis mt_2 mt_1 mvamet m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c em -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/em -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 diLepDeltaR H_pt pZetaMissVis mt_2 mt_1 mvamet m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c em -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/em -n $Paralells --blinding-threshold 0.2 --categories em_em_0Jets_FakeDiscriminator_rm_Nothing_signal em_em_0Jets_FakeDiscriminator_rm_Nothing_bkg em_em_0Jets_FakeDiscriminator_rm_Nothing_mixed em_em_0Jets_FinalDiscriminator_signal em_em_0Jets_FinalDiscriminator_bkg em_em_0Jets_FinalDiscriminator_mixed em_em_0Jets_TTDiscriminator_rm_Nothing_signal em_em_0Jets_TTDiscriminator_rm_Nothing_bkg em_em_0Jets_TTDiscriminator_rm_Nothing_mixed em_em_1Jets_FakeDiscriminator_rm_Nothing_signal em_em_1Jets_FakeDiscriminator_rm_Nothing_bkg em_em_1Jets_FakeDiscriminator_rm_Nothing_mixed em_em_1Jets_FinalDiscriminator_signal em_em_1Jets_FinalDiscriminator_bkg em_em_1Jets_FinalDiscriminator_mixed em_em_1Jets_TTDiscriminator_rm_Nothing_signal em_em_1Jets_TTDiscriminator_rm_Nothing_bkg em_em_1Jets_TTDiscriminator_rm_Nothing_mixed em_em_2Jets_FakeDiscriminator_rm_Nothing_signal em_em_2Jets_FakeDiscriminator_rm_Nothing_bkg em_em_2Jets_FakeDiscriminator_rm_Nothing_mixed em_em_2Jets_FinalDiscriminator_signal em_em_2Jets_FinalDiscriminator_bkg em_em_2Jets_FinalDiscriminator_mixed em_em_2Jets_TTDiscriminator_rm_Nothing_signal em_em_2Jets_TTDiscriminator_rm_Nothing_bkg em_em_2Jets_TTDiscriminator_rm_Nothing_mixed em_inclusive -x pt_1 pt_2 diLepDeltaR H_pt pZetaMissVis mt_2 mt_1 mvamet m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c em -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/em -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 diLepDeltaR H_pt pZetaMissVis mt_2 mt_1 mvamet m_sv diLepJet1DeltaR diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc


#=====BDT Overtraining=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/em -n $Paralells

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_0Jets_FakeDiscriminator_rm_Nothing -r -x 'sqrt(((T1em_0Jets_FakeDiscriminator_rm_Nothing-em_0Jets_FakeDiscriminator_rm_Nothing)/1)+((T2em_0Jets_FakeDiscriminator_rm_Nothing-em_0Jets_FakeDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_0Jets_FinalDiscriminator -r -x 'sqrt(((T1em_0Jets_FinalDiscriminator-em_0Jets_FinalDiscriminator)/1)+((T2em_0Jets_FinalDiscriminator-em_0Jets_FinalDiscriminator)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_0Jets_TTDiscriminator_rm_Nothing -r -x 'sqrt(((T1em_0Jets_TTDiscriminator_rm_Nothing-em_0Jets_TTDiscriminator_rm_Nothing)/1)+((T2em_0Jets_TTDiscriminator_rm_Nothing-em_0Jets_TTDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_1Jets_FakeDiscriminator_rm_Nothing -r -x 'sqrt(((T1em_1Jets_FakeDiscriminator_rm_Nothing-em_1Jets_FakeDiscriminator_rm_Nothing)/1)+((T2em_1Jets_FakeDiscriminator_rm_Nothing-em_1Jets_FakeDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_1Jets_FinalDiscriminator -r -x 'sqrt(((T1em_1Jets_FinalDiscriminator-em_1Jets_FinalDiscriminator)/1)+((T2em_1Jets_FinalDiscriminator-em_1Jets_FinalDiscriminator)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_1Jets_TTDiscriminator_rm_Nothing -r -x 'sqrt(((T1em_1Jets_TTDiscriminator_rm_Nothing-em_1Jets_TTDiscriminator_rm_Nothing)/1)+((T2em_1Jets_TTDiscriminator_rm_Nothing-em_1Jets_TTDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_2Jets_FakeDiscriminator_rm_Nothing -r -x 'sqrt(((T1em_2Jets_FakeDiscriminator_rm_Nothing-em_2Jets_FakeDiscriminator_rm_Nothing)/1)+((T2em_2Jets_FakeDiscriminator_rm_Nothing-em_2Jets_FakeDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_2Jets_FinalDiscriminator -r -x 'sqrt(((T1em_2Jets_FinalDiscriminator-em_2Jets_FinalDiscriminator)/1)+((T2em_2Jets_FinalDiscriminator-em_2Jets_FinalDiscriminator)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c em -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/em/em_2Jets_TTDiscriminator_rm_Nothing -r -x 'sqrt(((T1em_2Jets_TTDiscriminator_rm_Nothing-em_2Jets_TTDiscriminator_rm_Nothing)/1)+((T2em_2Jets_TTDiscriminator_rm_Nothing-em_2Jets_TTDiscriminator_rm_Nothing)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/nFold_DiffScan.py -i $PlotPath/BDTs/em -o $PlotPath/em_DiffScans -m $Masses

#=====Categorization Overlap=====



#=====Limit commands start here=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_datacardsMVATest.py -i $ArtusInput -x $Variable --add-bbb-uncs -m $Masses -n $Paralells --clear-output-dir -c em -w $Weights -o $PlotPath/em/classic --categories 0jet_high 0jet_low 1jet_high 1jet_low 2jet_vbf --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc


python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/limit_collector.py -i $PlotPath/em/classic -o $PlotPath/limits_vbftagging -m $Masses


#=====remove files with new categories=====

rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/Reg_BDT.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/VBF_BDT.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_shift_expressions.cfg
touch $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_expressions.cfg
touch $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/em_mvadatacards.cfg
