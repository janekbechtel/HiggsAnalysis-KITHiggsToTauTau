#!/bin/bash
#Adjust these export commands to meet your directory settings
export PlotPath=
export ArtusInput=
export Masses=
export Weights=
export Paralells=
export scale_mc='1.0'
export project_lumi='1.0'
export cut_mc='1.0'
export Variable=m_vis

#=====BDT plotting commands start here=====
mkdir -p $PlotPath/BDTs
rm $PlotPath/BDTs/mt/mt_minmax.txt
touch $PlotPath/BDTs/mt/mt_minmax.txt

#============plotlevel operations=============


#=====Cuts and Uncertainties=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_OneJets_FakeBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_OneJets_FakeBDT -n $Paralells -x mt_OneJets_FakeBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_OneJets_FakeBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_OneJets_FakeBDT -n $Paralells -x mt_OneJets_FakeBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_OneJets_FinalBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_OneJets_FinalBDT -n $Paralells -x mt_OneJets_FinalBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_OneJets_FinalBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_OneJets_FinalBDT -n $Paralells -x mt_OneJets_FinalBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_OneJets_ZttBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_OneJets_ZttBDT -n $Paralells -x mt_OneJets_ZttBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_OneJets_ZttBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_OneJets_ZttBDT -n $Paralells -x mt_OneJets_ZttBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_TwoJets_FakeBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_TwoJets_FakeBDT -n $Paralells -x mt_TwoJets_FakeBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_TwoJets_FakeBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_TwoJets_FakeBDT -n $Paralells -x mt_TwoJets_FakeBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_TwoJets_FinalBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_TwoJets_FinalBDT -n $Paralells -x mt_TwoJets_FinalBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_TwoJets_FinalBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_TwoJets_FinalBDT -n $Paralells -x mt_TwoJets_FinalBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_TwoJets_ZttBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_TwoJets_ZttBDT -n $Paralells -x mt_TwoJets_ZttBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_TwoJets_ZttBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_TwoJets_ZttBDT -n $Paralells -x mt_TwoJets_ZttBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_ZeroJets_FakeBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_ZeroJets_FakeBDT -n $Paralells -x mt_ZeroJets_FakeBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_ZeroJets_FakeBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_ZeroJets_FakeBDT -n $Paralells -x mt_ZeroJets_FakeBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_ZeroJets_FinalBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_ZeroJets_FinalBDT -n $Paralells -x mt_ZeroJets_FinalBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_ZeroJets_FinalBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_ZeroJets_FinalBDT -n $Paralells -x mt_ZeroJets_FinalBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5 --x-bins "40,-1,1" --filename "ratio_mt_ZeroJets_ZttBDT"' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses  -r --blinding-threshold 0.2 -c mt -w $Weights --scale-signal 250 -o $PlotPath/BDTs/mt/mt_ZeroJets_ZttBDT -n $Paralells -x mt_ZeroJets_ZttBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --x-bins "400,-1,1" --filename "integral_mt_ZeroJets_ZttBDT" --sob-frontname "regular_name : "' -s ztt zll ttj vv wj qcd ggh qqh vh htt -m $Masses  --integrated-sob --integration-directions 'righttoleft' 'righttoleft' 'righttoleft' 'rcombination' --integration-methods soversqrtsplusb --integration-output $PlotPath/BDTs/mt/mt_minmax.txt -c mt -w $Weights --blinding-threshold 0.15 --scale-signal 250 -o $PlotPath/BDTs/mt/mt_ZeroJets_ZttBDT -n $Paralells -x mt_ZeroJets_ZttBDT --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg



#=====copy files with new categories=====
cp $PlotPath/BDTs/mt/mt_minmax.txt $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
cp ./mt_mvadatacards.cfg $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg


#=====Controllplots and other stuff=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c mt -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/mt -n $Paralells --blinding-threshold 0.2 --categories mt_mt_OneJets_FakeBDT_signal mt_mt_OneJets_FakeBDT_bkg mt_mt_OneJets_FakeBDT_mixed mt_mt_OneJets_FinalBDT_signal mt_mt_OneJets_FinalBDT_bkg mt_mt_OneJets_FinalBDT_mixed mt_mt_OneJets_ZttBDT_signal mt_mt_OneJets_ZttBDT_bkg mt_mt_OneJets_ZttBDT_mixed mt_mt_TwoJets_FakeBDT_signal mt_mt_TwoJets_FakeBDT_bkg mt_mt_TwoJets_FakeBDT_mixed mt_mt_TwoJets_FinalBDT_signal mt_mt_TwoJets_FinalBDT_bkg mt_mt_TwoJets_FinalBDT_mixed mt_mt_TwoJets_ZttBDT_signal mt_mt_TwoJets_ZttBDT_bkg mt_mt_TwoJets_ZttBDT_mixed mt_mt_ZeroJets_FakeBDT_signal mt_mt_ZeroJets_FakeBDT_bkg mt_mt_ZeroJets_FakeBDT_mixed mt_mt_ZeroJets_FinalBDT_signal mt_mt_ZeroJets_FinalBDT_bkg mt_mt_ZeroJets_FinalBDT_mixed mt_mt_ZeroJets_ZttBDT_signal mt_mt_ZeroJets_ZttBDT_bkg mt_mt_ZeroJets_ZttBDT_mixed mt_inclusive -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt diLepJet1DeltaR m_sv diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c mt -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/mt -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt diLepJet1DeltaR m_sv diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c mt -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/mt -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt diLepJet1DeltaR m_sv diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c mt -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/mt -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt diLepJet1DeltaR m_sv diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c mt -w $Weights --scale-signal 250 -o $PlotPath/Controllplots/mt -n $Paralells --blinding-threshold 0.2 --categories mt_mt_OneJets_FakeBDT_signal mt_mt_OneJets_FakeBDT_bkg mt_mt_OneJets_FakeBDT_mixed mt_mt_OneJets_FinalBDT_signal mt_mt_OneJets_FinalBDT_bkg mt_mt_OneJets_FinalBDT_mixed mt_mt_OneJets_ZttBDT_signal mt_mt_OneJets_ZttBDT_bkg mt_mt_OneJets_ZttBDT_mixed mt_mt_TwoJets_FakeBDT_signal mt_mt_TwoJets_FakeBDT_bkg mt_mt_TwoJets_FakeBDT_mixed mt_mt_TwoJets_FinalBDT_signal mt_mt_TwoJets_FinalBDT_bkg mt_mt_TwoJets_FinalBDT_mixed mt_mt_TwoJets_ZttBDT_signal mt_mt_TwoJets_ZttBDT_bkg mt_mt_TwoJets_ZttBDT_mixed mt_mt_ZeroJets_FakeBDT_signal mt_mt_ZeroJets_FakeBDT_bkg mt_mt_ZeroJets_FakeBDT_mixed mt_mt_ZeroJets_FinalBDT_signal mt_mt_ZeroJets_FinalBDT_bkg mt_mt_ZeroJets_FinalBDT_mixed mt_mt_ZeroJets_ZttBDT_signal mt_mt_ZeroJets_ZttBDT_bkg mt_mt_ZeroJets_ZttBDT_mixed mt_inclusive -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt diLepJet1DeltaR m_sv diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py -r --mva -i $ArtusInput -a '--legend 0.23 0.63 0.9 0.83 --formats png eps pdf --y-rel-lims 0.9 1.75 --y-subplot-lims 0.5 1.5' -s ztt zll ttj vv wj qcd ggh qqh vh htt data -m $Masses -c mt -w $Weights --scale-signal 25 -o $PlotPath/Controllplots/mt -n $Paralells --blinding-threshold 0.2 --categories  -x pt_1 pt_2 mt_1 mvamet pZetaMissVis diLepDeltaR mt_2 H_pt diLepJet1DeltaR m_sv diLep_diJet_deltaR mjj jdeta m_sv m_vis --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc


#=====BDT Overtraining=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/plot_overtraining.py -i ./* -o $PlotPath/BDTs/mt -n $Paralells

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_OneJets_FakeBDT -r -x 'sqrt(((T1mt_OneJets_FakeBDT-mt_OneJets_FakeBDT)/1)+((T2mt_OneJets_FakeBDT-mt_OneJets_FakeBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_OneJets_FinalBDT -r -x 'sqrt(((T1mt_OneJets_FinalBDT-mt_OneJets_FinalBDT)/1)+((T2mt_OneJets_FinalBDT-mt_OneJets_FinalBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_OneJets_ZttBDT -r -x 'sqrt(((T1mt_OneJets_ZttBDT-mt_OneJets_ZttBDT)/1)+((T2mt_OneJets_ZttBDT-mt_OneJets_ZttBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_TwoJets_FakeBDT -r -x 'sqrt(((T1mt_TwoJets_FakeBDT-mt_TwoJets_FakeBDT)/1)+((T2mt_TwoJets_FakeBDT-mt_TwoJets_FakeBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_TwoJets_FinalBDT -r -x 'sqrt(((T1mt_TwoJets_FinalBDT-mt_TwoJets_FinalBDT)/1)+((T2mt_TwoJets_FinalBDT-mt_TwoJets_FinalBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_TwoJets_ZttBDT -r -x 'sqrt(((T1mt_TwoJets_ZttBDT-mt_TwoJets_ZttBDT)/1)+((T2mt_TwoJets_ZttBDT-mt_TwoJets_ZttBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_ZeroJets_FakeBDT -r -x 'sqrt(((T1mt_ZeroJets_FakeBDT-mt_ZeroJets_FakeBDT)/1)+((T2mt_ZeroJets_FakeBDT-mt_ZeroJets_FakeBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_ZeroJets_FinalBDT -r -x 'sqrt(((T1mt_ZeroJets_FinalBDT-mt_ZeroJets_FinalBDT)/1)+((T2mt_ZeroJets_FinalBDT-mt_ZeroJets_FinalBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_controlPlots.py --mva -s ztt zll vv wj ttj qcd data htt -c mt -w $Weights -m $Masses -i $ArtusInput -a '--plot-modules "PlotRootHtt" --x-bins "50,-1,1" --x-label "#scale[1.1]{(#sum((T(i)-Fin)/1)^{2})^{0.5}}" --formats eps png pdf --filename "sqrt_diff" --y-subplot-lims 0 2' -o $PlotPath/BDTs/mt/mt_ZeroJets_ZttBDT -r -x 'sqrt(((T1mt_ZeroJets_ZttBDT-mt_ZeroJets_ZttBDT)/1)+((T2mt_ZeroJets_ZttBDT-mt_ZeroJets_ZttBDT)/1))' --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc
python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/nFold_DiffScan.py -i $PlotPath/BDTs/mt -o $PlotPath/mt_DiffScans -m $Masses

#=====Categorization Overlap=====



#=====Limit commands start here=====

python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/makePlots_datacardsMVATest.py -i $ArtusInput -x $Variable --add-bbb-uncs -m $Masses -n $Paralells --clear-output-dir -c mt -w $Weights -o $PlotPath/mt/classic --categories 0jet_high 0jet_low 1jet_high 1jet_low 2jet_vbf --scale-mc-only $scale_mc --project-to-lumi $project_lumi --cut-mc-only $cut_mc


python $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/scripts/limit_collector.py -i $PlotPath/mt/classic -o $PlotPath/limits_vbftagging -m $Masses


#=====remove files with new categories=====

rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/Reg_BDT.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/VBF_BDT.cfg
rm $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_shift_expressions.cfg
touch $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_expressions.cfg
touch $CMSSW_BASE/src/HiggsAnalysis/KITHiggsToTauTau/data/mva_configs/mt_mvadatacards.cfg
